{"ast":null,"code":"const MongoClient = require('mongodb').MongoClient;\n\nconst uri = \"mongodb+srv://tatiana:wmyzyqyouANDme824@cluster0-cigjb.mongodb.net/test?retryWrites=true&w=majority\";\nconst client = new MongoClient(uri, {\n  useNewUrlParser: true\n});\n\nfunction insertDoc(quote_number) {\n  const MongoClient = require('mongodb').MongoClient;\n\n  const uri = \"mongodb+srv://tatiana:wmyzyqyouANDme824@cluster0-cigjb.mongodb.net/test?retryWrites=true&w=majority\";\n  const client = new MongoClient(uri, {\n    useNewUrlParser: true\n  });\n  client.connect(err => {\n    const quotes = client.db(\"test\").collection(\"quote\");\n    quotes.insertOne({\n      id: 'test_user',\n      //quote: '1.85'\n      quote: quote_number\n    });\n    client.close();\n  });\n}\n\nasync function findDoc() {\n  var res;\n  const client = await MongoClient.connect(uri, {\n    useNewUrlParser: true\n  }).catch(err => {\n    console.log(err);\n  });\n\n  if (!client) {\n    return;\n  }\n\n  try {\n    const db = client.db(\"test\");\n    let collection = db.collection('quote');\n    let query = {\n      id: 'test_user'\n    };\n    res = await collection.findOne(query);\n    return res.quote; //console.log(res);\n  } catch (err) {\n    console.log(err); //return null;\n  } finally {\n    client.close(); // return null;\n  } //console.log('1 is ', res.quote)\n  //return await res.quote;\n  //return res.quote;\n\n} //insertDoc('2.33');\n//findDoc2();\n\n\nexports.insertDoc = insertDoc;\nexports.findDoc = findDoc;","map":{"version":3,"sources":["/Users/tatianatian/Desktop/Startup/shopify_app/trade/trades/mongotest.js"],"names":["MongoClient","require","uri","client","useNewUrlParser","insertDoc","quote_number","connect","err","quotes","db","collection","insertOne","id","quote","close","findDoc","res","catch","console","log","query","findOne","exports"],"mappings":"AACA,MAAMA,WAAW,GAAGC,OAAO,CAAC,SAAD,CAAP,CAAmBD,WAAvC;;AACA,MAAME,GAAG,GAAG,qGAAZ;AACA,MAAMC,MAAM,GAAG,IAAIH,WAAJ,CAAgBE,GAAhB,EAAqB;AAAEE,EAAAA,eAAe,EAAE;AAAnB,CAArB,CAAf;;AAEA,SAASC,SAAT,CAAmBC,YAAnB,EAAgC;AAC9B,QAAMN,WAAW,GAAGC,OAAO,CAAC,SAAD,CAAP,CAAmBD,WAAvC;;AACA,QAAME,GAAG,GAAG,qGAAZ;AACA,QAAMC,MAAM,GAAG,IAAIH,WAAJ,CAAgBE,GAAhB,EAAqB;AAAEE,IAAAA,eAAe,EAAE;AAAnB,GAArB,CAAf;AACAD,EAAAA,MAAM,CAACI,OAAP,CAAeC,GAAG,IAAI;AACpB,UAAMC,MAAM,GAAGN,MAAM,CAACO,EAAP,CAAU,MAAV,EAAkBC,UAAlB,CAA6B,OAA7B,CAAf;AACAF,IAAAA,MAAM,CAACG,SAAP,CAAiB;AACfC,MAAAA,EAAE,EAAE,WADW;AAEf;AACAC,MAAAA,KAAK,EAAER;AAHQ,KAAjB;AAKAH,IAAAA,MAAM,CAACY,KAAP;AACD,GARD;AASD;;AAGD,eAAeC,OAAf,GAAyB;AACvB,MAAIC,GAAJ;AACA,QAAMd,MAAM,GAAG,MAAMH,WAAW,CAACO,OAAZ,CAAoBL,GAApB,EAAyB;AAAEE,IAAAA,eAAe,EAAE;AAAnB,GAAzB,EAChBc,KADgB,CACVV,GAAG,IAAI;AAAEW,IAAAA,OAAO,CAACC,GAAR,CAAYZ,GAAZ;AAAmB,GADlB,CAArB;;AAEA,MAAI,CAACL,MAAL,EAAa;AACT;AACH;;AACD,MAAI;AACA,UAAMO,EAAE,GAAGP,MAAM,CAACO,EAAP,CAAU,MAAV,CAAX;AACA,QAAIC,UAAU,GAAGD,EAAE,CAACC,UAAH,CAAc,OAAd,CAAjB;AACA,QAAIU,KAAK,GAAG;AAAER,MAAAA,EAAE,EAAE;AAAN,KAAZ;AACAI,IAAAA,GAAG,GAAG,MAAMN,UAAU,CAACW,OAAX,CAAmBD,KAAnB,CAAZ;AACA,WAAOJ,GAAG,CAACH,KAAX,CALA,CAMA;AACH,GAPD,CAOE,OAAON,GAAP,EAAY;AACVW,IAAAA,OAAO,CAACC,GAAR,CAAYZ,GAAZ,EADU,CAEV;AACH,GAVD,SAUU;AACNL,IAAAA,MAAM,CAACY,KAAP,GADM,CAEP;AACF,GApBsB,CAqBvB;AACA;AACA;;AACD,C,CAID;AACA;;;AACAQ,OAAO,CAAClB,SAAR,GAAoBA,SAApB;AACAkB,OAAO,CAACP,OAAR,GAAkBA,OAAlB","sourcesContent":["\nconst MongoClient = require('mongodb').MongoClient;\nconst uri = \"mongodb+srv://tatiana:wmyzyqyouANDme824@cluster0-cigjb.mongodb.net/test?retryWrites=true&w=majority\";\nconst client = new MongoClient(uri, { useNewUrlParser: true });\n\nfunction insertDoc(quote_number){\n  const MongoClient = require('mongodb').MongoClient;\n  const uri = \"mongodb+srv://tatiana:wmyzyqyouANDme824@cluster0-cigjb.mongodb.net/test?retryWrites=true&w=majority\";\n  const client = new MongoClient(uri, { useNewUrlParser: true });\n  client.connect(err => {\n    const quotes = client.db(\"test\").collection(\"quote\");\n    quotes.insertOne({\n      id: 'test_user',\n      //quote: '1.85'\n      quote: quote_number\n    })\n    client.close();\n  });\n}\n\n\nasync function findDoc() {\n  var res;\n  const client = await MongoClient.connect(uri, { useNewUrlParser: true })\n      .catch(err => { console.log(err); });\n  if (!client) {\n      return;\n  }\n  try {\n      const db = client.db(\"test\");\n      let collection = db.collection('quote');\n      let query = { id: 'test_user' }\n      res = await collection.findOne(query);\n      return res.quote;\n      //console.log(res);\n  } catch (err) {\n      console.log(err);\n      //return null;\n  } finally {\n      client.close();\n     // return null;\n  }\n  //console.log('1 is ', res.quote)\n  //return await res.quote;\n  //return res.quote;\n}\n\n\n\n//insertDoc('2.33');\n//findDoc2();\nexports.insertDoc = insertDoc;\nexports.findDoc = findDoc;\n\n"]},"metadata":{},"sourceType":"script"}