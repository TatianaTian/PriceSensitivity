{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useCallback, useState } from 'react';\nimport { Card, Layout, Caption, TextStyle, DisplayText, Select } from '@shopify/polaris';\nimport { HorizontalBar, Doughnut, Bar } from 'react-chartjs-2';\nimport store from 'store-js'; //import '../style/style.css'\n\nconst getPearsonCorrelation = require('../functions/calc_correlation');\n\nconst string_to_list = require('../functions/string_to_list');\n\nconst fetch_from_map = require('../functions/fetch_from_map');\n\nimport { FaRegArrowAltCircleDown, FaRegArrowAltCircleUp } from 'react-icons/fa';\nexport default function Country_data(props) {\n  const {\n    0: selected,\n    1: setSelected\n  } = useState('all');\n  const handleSelectChange = useCallback(value => setSelected(value), []);\n  console.log('props.product_id_title_map is ', props.product_id_title_map);\n  var options = fetch_from_map(props.select, props.tabs, props.maps, props.product_id_title_map, selected, props.product_id_price_map, props.fx_map);\n  const store_currency = props.store_currency;\n  /*\n  options = [\n  {label: 'All products', value: 'allProducts'},\n  {label: 'Oldest update', value: 'oldestUpdate'},\n  {label: 'Most spent', value: 'mostSpent'},\n  {label: 'Most orders', value: 'mostOrders'},\n  {label: 'Last name A–Z', value: 'lastNameAlpha'},\n  {label: 'Last name Z–A', value: 'lastNameReverseAlpha'},\n  ];*/\n\n  console.log(\"options are \", options);\n  console.log(\"selected from dropdown is \", selected);\n  console.log(\"on tab \", props.select);\n  console.log(\"tabs are \", props.tabs);\n  console.log(\"map is \", props.maps);\n  const date_string = localStorage.getItem('date');\n  const price_string = localStorage.getItem('price');\n  const exchange_rate_string = localStorage.getItem('exchange_rate');\n  const current_level_string = localStorage.getItem('current_level');\n  const correlation = localStorage.getItem('correlation');\n  const regression_fx_string = localStorage.getItem('regression_fx');\n  const regression_sales_string = localStorage.getItem('regression_sales');\n  const regression_predicted_sales_string = localStorage.getItem('regression_predicted_sales');\n  const regression_slope = localStorage.getItem('slope');\n  const today_product_price = localStorage.getItem('today_product_price');\n  const product_array_rank_string = localStorage.getItem('product_array_rank');\n  const slope_rank_string = localStorage.getItem('slope_rank');\n  const indicated_sale = localStorage.getItem('indicated_sale');\n  var date = [];\n  var price = [];\n  var exchange_rate = [];\n  var current_level = [];\n  var regression_fx = [];\n  var regression_sales = [];\n  var regression_predicted_sales = [];\n  var product_array_rank = [];\n  var slope_rank = [];\n  var min_bar = 0;\n  var max_bar = 0;\n  var min_line = 0;\n  var max_line = 0;\n  var min_price_range = 0;\n  var max_price_range = 0;\n  var min_sales_range = 0;\n  var max_sales_range = 0;\n\n  if (date_string.includes(',')) {\n    date = string_to_list(localStorage.getItem('date'), '');\n    /*\n    price = string_to_list(store.get('price'),'float')\n    exchange_rate = string_to_list(store.get('exchange_rate'),'float')\n    current_level = string_to_list(store.get('current_level'),'float')  */\n\n    price = string_to_list(price_string, 'float');\n    exchange_rate = string_to_list(exchange_rate_string, 'float');\n    current_level = string_to_list(current_level_string, 'float');\n    regression_fx = string_to_list(regression_fx_string, 'float');\n    regression_sales = string_to_list(regression_sales_string, 'float');\n    regression_predicted_sales = string_to_list(regression_predicted_sales_string, 'float');\n    product_array_rank = string_to_list(product_array_rank_string, '');\n    slope_rank = string_to_list(slope_rank_string, 'float');\n    min_price_range = Math.min.apply(Math, regression_fx);\n    max_price_range = Math.max.apply(Math, regression_fx);\n    min_sales_range = Math.min.apply(Math, regression_sales);\n    max_sales_range = Math.max.apply(Math, regression_sales);\n    min_bar = Math.min.apply(Math, price) * 0.8;\n    max_bar = (Math.max.apply(Math, price) - min_bar) * 2.2 + min_bar;\n    max_line = Math.max.apply(Math, exchange_rate);\n    min_line = max_line - (max_line - Math.min.apply(Math, exchange_rate)) * 2.2;\n    console.log(\"y is \", [min_bar, max_bar, min_line, max_line]);\n  } else {\n    date = [date_string];\n    price = [price_string];\n    exchange_rate = [exchange_rate_string];\n    current_level = string_to_list(store.get('current_level'), 'float');\n  }\n\n  console.log(\"regression_fx is \", regression_fx);\n  console.log(\"regression_sales is \");\n  console.log(\"regression_predicted_sales is \", regression_predicted_sales);\n  console.log(\"product_array_rank is \", product_array_rank);\n  console.log(\"slope_rank is \", slope_rank); //console.log(\"product_array_rank[0] is \", product_array_rank[0]===\"\");\n\n  console.log(\"indicated_sale is \", indicated_sale); //const level = store.get('level') \n\n  var r = Math.min(Math.abs(parseFloat(correlation)), 3); //r = parseInt(Math.min(Math.abs(getPearsonCorrelation([34,37,24,67,42 ],[1.23,1.22, 1.23, 1.24, 1.25])), 1) * 100)\n\n  var doughnut = [r, 3 - r];\n  var leve_num1 = [Math.max(current_level[0] * 100 - 2, 0), Math.max(current_level[1] * 100 - 2, 0), Math.max(current_level[2] * 100 - 2, 0), Math.max(current_level[3] * 100 - 2, 0)]; //console.log(\"level-num1 is \", leve_num1)\n\n  var leve_num3 = [98 - leve_num1[0], 98 - leve_num1[1], 98 - leve_num1[2], 98 - leve_num1[3]]; //console.log(\"level-num3 is \", leve_num3)\n\n  const leve_num2 = [2, 2, 2, 2];\n  /*\n  console.log(\"date is \", date)\n  console.log(\"price is \", price)\n  console.log(\"exchange_rate is \", exchange_rate)\n  console.log(\"current_level is \", current_level)\n  console.log(\"correlation is \", correlation)*/\n\n  var color = '';\n  var text = '';\n\n  if (r < 1) {\n    color = '#63b7af';\n    text = 'LOW';\n  } else if (r < 2) {\n    color = '#ffa41b';\n    text = 'MODERATE';\n  } else {\n    color = '#ff6f5e';\n    text = 'HIGH';\n  }\n\n  const doughnutChartData = {\n    labels: [text + ': ' + Math.round(Math.abs(correlation) * 100) / 100],\n    datasets: [{\n      //backgroundColor: [\"#FF6D2D\",\"#45853C\"],\n      backgroundColor: [color, \"#ECECEC\"],\n      borderColor: 'rgba(0, 0, 0, 0)',\n      borderWidth: 2,\n      data: doughnut\n    }]\n  };\n  const doughnutChartOptions = {\n    circumference: 1 * Math.PI,\n    rotation: Math.PI,\n    maintainAspectRatio: true,\n    cutoutPercentage: 80,\n    tooltips: {\n      enabled: false\n    },\n    legend: {\n      display: true,\n      position: 'bottom',\n      align: 'center',\n      labels: {\n        fontSize: 20,\n        boxWidth: 0,\n        fontColor: '#222831'\n      }\n    },\n    pieceLabel: {\n      render: 'value' + '%',\n      fontColor: \"white\"\n    },\n    layout: {\n      padding: {\n        left: 80,\n        right: 20,\n        top: 20,\n        bottom: 20\n      }\n    }\n  };\n  var lineChartData = {\n    //labels: [\"2020-05-08\", \"2020-05-09\", \"2020-05-10\"],\n    labels: date,\n    //lables: [price[0],price[1],price[2]],\n    datasets: [{\n      yAxisID: 'A',\n      type: \"bar\",\n      label: \"sales in store currency\",\n      fill: false,\n      lineTension: 0,\n      backgroundColor: \"#63b7af\",\n      borderColor: \"#63b7af\",\n      borderCapStyle: 'butt',\n      borderDash: [],\n      borderDashOffset: 0.0,\n      borderJoinStyle: 'miter',\n      pointBorderColor: \"rgb(1, 2, 58)\",\n      pointBackgroundColor: \"rgb(1, 2, 58)\",\n      pointBorderWidth: 1,\n      pointHoverRadius: 5,\n      pointHoverBackgroundColor: \"rgb(1, 2, 58)\",\n      pointHoverBorderColor: \"rgb(1, 2, 58)\",\n      pointHoverBorderWidth: 2,\n      pointRadius: 4,\n      pointHitRadius: 10,\n      // notice the gap in the data and the spanGaps: false\n      //data: [89.54, 96.8, 246.51],\n      data: price,\n      //data: [store.get('price')],\n      spanGaps: false,\n      barPercentage: 0.3\n    }, {\n      yAxisID: 'B',\n      type: \"line\",\n      label: \"product price\",\n      fill: false,\n      lineTension: 0.3,\n      backgroundColor: \"#ee8572\",\n      borderColor: \"#ee8572\",\n      borderCapStyle: 'butt',\n      borderDash: [],\n      borderDashOffset: 0.0,\n      borderJoinStyle: 'miter',\n      pointBorderColor: \"#ee8572\",\n      pointBackgroundColor: \"#ee8572\",\n      pointBorderWidth: 1,\n      pointHoverRadius: 5,\n      pointHoverBackgroundColor: \"#ee8572\",\n      pointHoverBorderColor: \"#ee8572\",\n      pointHoverBorderWidth: 2,\n      pointRadius: 4,\n      pointHitRadius: 10,\n      // notice the gap in the data and the spanGaps: false\n      //data: [0.8072950291, 0.8072950291, 0.8072950291],\n      data: exchange_rate,\n      //data: [store.get('exchange_rate')],\n      spanGaps: false\n    }]\n  };\n  var lineChartOptions = {\n    maintainAspectRatio: true,\n    tooltips: {\n      enabled: true\n    },\n    legend: {\n      display: false\n    },\n    scales: {\n      yAxes: [{\n        id: 'A',\n        type: 'linear',\n        position: 'left',\n        gridLines: {\n          color: \"rgba(0, 0, 0, 0)\"\n        },\n        ticks: {\n          min: min_bar,\n          max: max_bar\n        }\n      }, {\n        id: 'B',\n        type: 'linear',\n        position: 'right',\n        gridLines: {\n          color: \"rgba(0, 0, 0, 0)\"\n        },\n        ticks: {\n          min: min_line,\n          max: max_line\n        }\n      }],\n      xAxes: [{\n        gridLines: {\n          color: \"rgba(0, 0, 0, 0)\"\n        }\n      }]\n    },\n    layout: {\n      padding: {\n        left: 50,\n        right: 50,\n        top: 20,\n        bottom: 20\n      }\n    }\n  };\n  var lineRegressionChartData = {\n    //labels: [\"2020-05-08\", \"2020-05-09\", \"2020-05-10\"],\n    //labels: [0.8,0.9,1.0],\n    labels: regression_fx,\n    datasets: [{\n      type: \"line\",\n      label: \"sales in store currency\",\n      fill: false,\n      lineTension: 0,\n      backgroundColor: \"rgba(0, 0, 0, 0)\",\n      borderWidth: 0,\n      borderColor: \"rgba(0, 0, 0, 0)\",\n      borderCapStyle: 'butt',\n      borderDash: [],\n      borderDashOffset: 0.0,\n      borderJoinStyle: 'miter',\n      pointBorderColor: \"#ffa41b\",\n      pointBackgroundColor: \"#ffa41b\",\n      pointBorderWidth: 1,\n      pointHoverRadius: 5,\n      pointHoverBackgroundColor: \"#ffa41b\",\n      pointHoverBorderColor: \"#ffa41b\",\n      pointHoverBorderWidth: 2,\n      pointRadius: 4,\n      pointHitRadius: 10,\n      // notice the gap in the data and the spanGaps: false\n      //data: [89.54, 96.8, 246.51],\n      //data: [209, 555, 143],\n      data: regression_sales,\n      spanGaps: false,\n      barPercentage: 0.3\n    }, {\n      type: \"line\",\n      label: \"fitted model\",\n      fill: false,\n      backgroundColor: \"#D3D3D3\",\n      borderColor: \"#D3D3D3\",\n      borderCapStyle: 'butt',\n      borderDash: [],\n      borderDashOffset: 0.0,\n      borderJoinStyle: 'miter',\n      pointBorderColor: \"#D3D3D3\",\n      pointBackgroundColor: \"#fff\",\n      pointBorderWidth: 1,\n      pointHoverRadius: 5,\n      pointHoverBackgroundColor: \"#D3D3D3\",\n      pointHoverBorderColor: \"#D3D3D3\",\n      pointHoverBorderWidth: 2,\n      pointRadius: 1,\n      pointHitRadius: 10,\n      //data: [100,200,300],\n      data: regression_predicted_sales,\n      spanGaps: false\n    }]\n  };\n  var lineRegressionChartOptions = {\n    maintainAspectRatio: true,\n    tooltips: {\n      enabled: true\n    },\n    legend: {\n      display: false\n    },\n    scales: {\n      yAxes: [{\n        id: 'A',\n        type: 'linear',\n        //position: 'left',\n        gridLines: {\n          color: \"rgba(0, 0, 0, 0)\"\n        } //ticks: {min: min_bar,\n        //    max: max_bar}\n\n      }],\n      xAxes: [{\n        gridLines: {\n          color: \"rgba(0, 0, 0, 0)\"\n        }\n      }]\n    },\n    layout: {\n      padding: {\n        left: 50,\n        right: 50,\n        top: 20,\n        bottom: 20\n      }\n    }\n  };\n  const barChartData = {\n    //labels: ['China - Monthly CPI', 'US - Monthly CPI', 'China - Quarterly GDP','US - Aaa Corporate Bonds', 'US - S&P 500'],\n    labels: product_array_rank,\n    datasets: [{\n      backgroundColor: ['#63b7af', \"#ff6f5e\", '#ffa41b', '#b2ebf2', '#35495e'],\n      borderColor: 'rgba(0, 0, 0, 0)',\n      borderWidth: 2,\n      //data: [0.65, 0.50, 0.47, 0.39, 0.37]\n      data: slope_rank\n    }]\n  };\n  const barChartOptions = {\n    legend: {\n      display: false\n    },\n    scales: {\n      xAxes: [{\n        scaleLabel: {\n          display: true,\n          labelString: \"Sales change in \" + store_currency + \" with 1 \" + props.tabs[props.select]['id'] + \" price change\"\n        },\n        gridLines: {\n          color: \"rgba(0, 0, 0, 0)\"\n        }\n      }],\n      yAxes: [{\n        barPercentage: 0.3,\n        gridLines: {\n          color: \"rgba(0, 0, 0, 0)\"\n        }\n      }]\n    },\n    layout: {\n      padding: {\n        left: 20,\n        right: 80,\n        top: 20,\n        bottom: 20\n      }\n    }\n  };\n  const rangeChartData = {\n    labels: ['past 3 days', 'past 1 week', 'past 1 month', 'past 3 months'],\n    datasets: [{\n      label: 'range',\n      backgroundColor: '#35495e',\n      stack: '3',\n      data: leve_num1\n    }, {\n      backgroundColor: '#63b7af',\n      stack: '3',\n      data: leve_num2\n    }, {\n      label: 'range2',\n      backgroundColor: '#35495e',\n      stack: '3',\n      data: leve_num3\n    }]\n  };\n  const rangeChartOptions = {\n    maintainAspectRatio: true,\n    tooltips: {\n      enabled: false\n    },\n    legend: {\n      display: false\n    },\n    scales: {\n      xAxes: [{\n        stacked: true,\n        gridLines: {\n          color: \"rgba(0, 0, 0, 0)\"\n        },\n        ticks: {\n          min: 0,\n          max: 100,\n          callback: function (value) {\n            return value + \"%\";\n          }\n        }\n      }],\n      yAxes: [{\n        stacked: true,\n        barPercentage: 0.4,\n        gridLines: {\n          color: \"rgba(0, 0, 0, 0)\"\n        }\n      }]\n    },\n    layout: {\n      padding: {\n        left: 20,\n        right: 80,\n        top: 20,\n        bottom: 20\n      }\n    }\n  }; //console.log(\"height is \", [height2, h1, h2, h3])\n\n  return __jsx(Layout, {\n    sectioned: false\n  }, __jsx(Layout.Section, {\n    oneHalf: true\n  }, __jsx(Card, {\n    title: \"Analytics\",\n    sectioned: true\n  }, __jsx(\"p\", null, __jsx(\"b\", null, \"Price range:\"), \" \", min_price_range, \" \", props.tabs[props.select]['id'], \" - \", max_price_range, \" \", props.tabs[props.select]['id']), __jsx(\"br\", null), __jsx(\"p\", null, __jsx(\"b\", null, \"Sales range:\"), \" \", min_sales_range, \" \", store_currency, \" - \", max_sales_range, \" \", store_currency, \" per day\"), __jsx(\"br\", null), __jsx(\"p\", null, __jsx(FaRegArrowAltCircleDown, null), \" 1 \", props.tabs[props.select]['id'], \" in price\"), __jsx(\"br\", null), __jsx(\"p\", null, __jsx(FaRegArrowAltCircleUp, null), \" \", regression_slope, \" \", store_currency, \" sales/day\"), __jsx(\"br\", null), __jsx(\"p\", null, __jsx(\"b\", null, \"Current price:\"), \" \", today_product_price, \" \", props.tabs[props.select]['id']), __jsx(\"br\", null), __jsx(\"p\", null, __jsx(\"b\", null, \"Projected sales:\"), \" \", indicated_sale, \" \", store_currency, \" per day\"), __jsx(\"br\", null))), __jsx(Layout.Section, {\n    oneHalf: true\n  }, __jsx(Bar, {\n    height: \"280vh\",\n    data: lineRegressionChartData,\n    options: lineRegressionChartOptions\n  })));\n}","map":{"version":3,"sources":["/Users/tatianatian/Desktop/Startup/shopify_front_back_end/client/components/Country_data.js"],"names":["React","useCallback","useState","Card","Layout","Caption","TextStyle","DisplayText","Select","HorizontalBar","Doughnut","Bar","store","getPearsonCorrelation","require","string_to_list","fetch_from_map","FaRegArrowAltCircleDown","FaRegArrowAltCircleUp","Country_data","props","selected","setSelected","handleSelectChange","value","console","log","product_id_title_map","options","select","tabs","maps","product_id_price_map","fx_map","store_currency","date_string","localStorage","getItem","price_string","exchange_rate_string","current_level_string","correlation","regression_fx_string","regression_sales_string","regression_predicted_sales_string","regression_slope","today_product_price","product_array_rank_string","slope_rank_string","indicated_sale","date","price","exchange_rate","current_level","regression_fx","regression_sales","regression_predicted_sales","product_array_rank","slope_rank","min_bar","max_bar","min_line","max_line","min_price_range","max_price_range","min_sales_range","max_sales_range","includes","Math","min","apply","max","get","r","abs","parseFloat","doughnut","leve_num1","leve_num3","leve_num2","color","text","doughnutChartData","labels","round","datasets","backgroundColor","borderColor","borderWidth","data","doughnutChartOptions","circumference","PI","rotation","maintainAspectRatio","cutoutPercentage","tooltips","enabled","legend","display","position","align","fontSize","boxWidth","fontColor","pieceLabel","render","layout","padding","left","right","top","bottom","lineChartData","yAxisID","type","label","fill","lineTension","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","pointBorderColor","pointBackgroundColor","pointBorderWidth","pointHoverRadius","pointHoverBackgroundColor","pointHoverBorderColor","pointHoverBorderWidth","pointRadius","pointHitRadius","spanGaps","barPercentage","lineChartOptions","scales","yAxes","id","gridLines","ticks","xAxes","lineRegressionChartData","lineRegressionChartOptions","barChartData","barChartOptions","scaleLabel","labelString","rangeChartData","stack","rangeChartOptions","stacked","callback"],"mappings":"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","sourcesContent":["import React, {useCallback, useState} from 'react';\nimport {Card, Layout, Caption, TextStyle,DisplayText, Select} from '@shopify/polaris';\nimport {HorizontalBar, Doughnut, Bar} from 'react-chartjs-2';\nimport store from 'store-js';\n//import '../style/style.css'\nconst getPearsonCorrelation = require('../functions/calc_correlation')\nconst string_to_list = require('../functions/string_to_list')\nconst fetch_from_map = require('../functions/fetch_from_map')\nimport {FaRegArrowAltCircleDown, FaRegArrowAltCircleUp} from 'react-icons/fa';\n\n\n\n\nexport default function Country_data(props) {  \n\n    const [selected, setSelected] = useState('all');\n    const handleSelectChange = useCallback((value) => setSelected(value), []);\n    console.log('props.product_id_title_map is ', props.product_id_title_map)\n    var options = fetch_from_map(props.select, props.tabs, props.maps, props.product_id_title_map, selected, props.product_id_price_map, props.fx_map)\n    \n    const store_currency = props.store_currency\n    \n    \n  \n    /*\n    options = [\n    {label: 'All products', value: 'allProducts'},\n    {label: 'Oldest update', value: 'oldestUpdate'},\n    {label: 'Most spent', value: 'mostSpent'},\n    {label: 'Most orders', value: 'mostOrders'},\n    {label: 'Last name A–Z', value: 'lastNameAlpha'},\n    {label: 'Last name Z–A', value: 'lastNameReverseAlpha'},\n    ];*/\n\n    console.log(\"options are \", options)\n    console.log(\"selected from dropdown is \", selected)\n    console.log(\"on tab \", props.select)\n    console.log(\"tabs are \", props.tabs)\n    console.log(\"map is \", props.maps)\n    \n\n    \n\n\n    const date_string = localStorage.getItem('date')\n    const price_string = localStorage.getItem('price')\n    const exchange_rate_string = localStorage.getItem('exchange_rate')\n    const current_level_string = localStorage.getItem('current_level')\n    const correlation = localStorage.getItem('correlation')\n    const regression_fx_string = localStorage.getItem('regression_fx');\n    const regression_sales_string = localStorage.getItem('regression_sales');\n    const regression_predicted_sales_string = localStorage.getItem('regression_predicted_sales');\n    const regression_slope = localStorage.getItem('slope');\n    const today_product_price = localStorage.getItem('today_product_price');\n    const product_array_rank_string = localStorage.getItem('product_array_rank');\n    const slope_rank_string = localStorage.getItem('slope_rank');\n    const indicated_sale = localStorage.getItem('indicated_sale');\n    \n    \n    var date = []\n    var price = []\n    var exchange_rate = []\n    var current_level = []\n    var regression_fx = []\n    var regression_sales = []\n    var regression_predicted_sales = []\n    var product_array_rank = []\n    var slope_rank = []\n\n    var min_bar = 0\n    var max_bar = 0\n    var min_line = 0\n    var max_line = 0\n    var min_price_range = 0\n    var max_price_range = 0\n    var min_sales_range = 0\n    var max_sales_range = 0\n\n\n    if (date_string.includes(',')){\n        date = string_to_list(localStorage.getItem('date'),'')\n        /*\n        price = string_to_list(store.get('price'),'float')\n        exchange_rate = string_to_list(store.get('exchange_rate'),'float')\n        current_level = string_to_list(store.get('current_level'),'float')  */\n        price = string_to_list(price_string,'float')\n        exchange_rate = string_to_list(exchange_rate_string,'float')\n        current_level = string_to_list(current_level_string,'float')  \n        regression_fx = string_to_list(regression_fx_string,'float')\n        regression_sales = string_to_list(regression_sales_string,'float')\n        regression_predicted_sales = string_to_list(regression_predicted_sales_string,'float')\n        product_array_rank = string_to_list(product_array_rank_string,'')\n        slope_rank = string_to_list(slope_rank_string,'float')\n\n        min_price_range = Math.min.apply(Math, regression_fx)\n        max_price_range = Math.max.apply(Math, regression_fx)\n        min_sales_range = Math.min.apply(Math, regression_sales)\n        max_sales_range = Math.max.apply(Math, regression_sales)\n        \n        min_bar = Math.min.apply(Math, price)*0.8\n        max_bar = (Math.max.apply(Math, price)-min_bar)*2.2+min_bar\n\n        max_line = Math.max.apply(Math, exchange_rate)\n        min_line = max_line - (max_line - Math.min.apply(Math, exchange_rate) )*2.2\n\n        console.log(\"y is \", [min_bar, max_bar, min_line, max_line])\n        \n\n    } else {\n        date = [date_string]\n        price = [price_string]\n        exchange_rate = [exchange_rate_string]\n        current_level = string_to_list(store.get('current_level'),'float')\n    }\n\n       \n    console.log(\"regression_fx is \", regression_fx);\n    console.log(\"regression_sales is \", );\n    console.log(\"regression_predicted_sales is \", regression_predicted_sales);\n    console.log(\"product_array_rank is \", product_array_rank);\n    console.log(\"slope_rank is \", slope_rank);\n    //console.log(\"product_array_rank[0] is \", product_array_rank[0]===\"\");\n    console.log(\"indicated_sale is \", indicated_sale);\n    \n\n    \n    //const level = store.get('level') \n  \n    var r = Math.min(Math.abs(parseFloat(correlation)), 3)\n    //r = parseInt(Math.min(Math.abs(getPearsonCorrelation([34,37,24,67,42 ],[1.23,1.22, 1.23, 1.24, 1.25])), 1) * 100)\n    var doughnut = [r, 3-r]\n    \n   \n    \n\n    var leve_num1 = [Math.max(current_level[0]*100-2,0), Math.max(current_level[1]*100-2,0), Math.max(current_level[2]*100-2,0), Math.max(current_level[3]*100-2,0)]\n    //console.log(\"level-num1 is \", leve_num1)\n    var leve_num3 = [98-leve_num1[0],98-leve_num1[1],98-leve_num1[2],98-leve_num1[3]]\n    //console.log(\"level-num3 is \", leve_num3)\n    const leve_num2 = [2, 2, 2, 2]\n\n\n    /*\n    console.log(\"date is \", date)\n    console.log(\"price is \", price)\n    console.log(\"exchange_rate is \", exchange_rate)\n    console.log(\"current_level is \", current_level)\n    console.log(\"correlation is \", correlation)*/\n \n    \n    var color = ''\n    var text = ''\n    if (r < 1){\n        color = '#63b7af'\n        text = 'LOW'\n    } else if (r < 2){\n        color = '#ffa41b'\n        text = 'MODERATE'\n    } else {\n        color = '#ff6f5e'\n        text = 'HIGH'\n    }\n   \n    \n    \n    const doughnutChartData = {\n      labels: [text+': '+Math.round(Math.abs(correlation)*100)/100],\n      \n      datasets: [\n        {\n          //backgroundColor: [\"#FF6D2D\",\"#45853C\"],\n          backgroundColor: [color,\"#ECECEC\"],\n          borderColor: 'rgba(0, 0, 0, 0)',\n          borderWidth: 2,\n          data: doughnut,\n    \n        }\n      ],\n    };\n      \n    const doughnutChartOptions = {\n      circumference: 1* Math.PI,\n      rotation: Math.PI,\n      maintainAspectRatio: true,\n      cutoutPercentage:80,\n      tooltips:{\n        enabled:false,\n      },\n      legend: {\n                display: true,\n                position: 'bottom',\n                align:'center',\n                labels:{\n                    fontSize: 20,\n                    boxWidth: 0,\n                    fontColor: '#222831'\n                }\n              },\n      pieceLabel: {\n        render: 'value' + '%',\n        fontColor: \"white\",\n      },\n    layout: {\n        padding: {\n            left: 80,\n            right: 20,\n            top: 20,\n            bottom: 20\n        }\n    } \n      };\n    \n    var lineChartData = {\n      //labels: [\"2020-05-08\", \"2020-05-09\", \"2020-05-10\"],\n      labels: date,\n      //lables: [price[0],price[1],price[2]],\n      datasets: [{\n        yAxisID: 'A',\n        type: \"bar\",\n        label: \"sales in store currency\",\n        fill: false,\n        lineTension: 0,\n        backgroundColor: \"#63b7af\",\n        borderColor: \"#63b7af\",\n        borderCapStyle: 'butt',\n        borderDash: [],\n        borderDashOffset: 0.0,\n        borderJoinStyle: 'miter',\n        pointBorderColor: \"rgb(1, 2, 58)\",\n        pointBackgroundColor: \"rgb(1, 2, 58)\",\n        pointBorderWidth: 1,\n        pointHoverRadius: 5,\n        pointHoverBackgroundColor: \"rgb(1, 2, 58)\",\n        pointHoverBorderColor: \"rgb(1, 2, 58)\",\n        pointHoverBorderWidth: 2,\n        pointRadius: 4,\n        pointHitRadius: 10,\n        // notice the gap in the data and the spanGaps: false\n        //data: [89.54, 96.8, 246.51],\n        data: price,\n        //data: [store.get('price')],\n        spanGaps: false,\n        barPercentage: 0.3\n        },\n        {\n          yAxisID: 'B',\n          type: \"line\",\n          label: \"product price\",\n          fill: false,\n          lineTension: 0.3,\n          backgroundColor: \"#ee8572\",\n          borderColor: \"#ee8572\",\n          borderCapStyle: 'butt',\n          borderDash: [],\n          borderDashOffset: 0.0,\n          borderJoinStyle: 'miter',\n          pointBorderColor: \"#ee8572\",\n          pointBackgroundColor: \"#ee8572\",\n          pointBorderWidth: 1,\n          pointHoverRadius: 5,\n          pointHoverBackgroundColor: \"#ee8572\",\n          pointHoverBorderColor: \"#ee8572\",\n          pointHoverBorderWidth: 2,\n          pointRadius: 4,\n          pointHitRadius: 10,\n          // notice the gap in the data and the spanGaps: false\n          //data: [0.8072950291, 0.8072950291, 0.8072950291],\n          data: exchange_rate,\n          //data: [store.get('exchange_rate')],\n          spanGaps: false,\n          }\n    \n      ]\n      };\n    \n    var lineChartOptions = {\n      maintainAspectRatio: true,\n      tooltips:{\n        enabled:true,\n      },\n      legend: {\n        display: false,\n      },\n      scales: {\n                yAxes:\n                [{\n                    id: 'A',\n                    type: 'linear',\n                    position: 'left',\n                    gridLines: {\n                        color: \"rgba(0, 0, 0, 0)\",\n                    },\n                    ticks: {\n                        min: min_bar,\n                        max: max_bar\n                    }\n    \n     \n                  }, {\n                    id: 'B',\n                    type: 'linear',\n                    position: 'right',\n                    gridLines: {\n                        color: \"rgba(0, 0, 0, 0)\",\n                    },\n                    ticks: {\n                        min: min_line,\n                        max: max_line\n                    }\n    \n    \n                  }],\n                xAxes: [{\n                  gridLines: {\n                    color: \"rgba(0, 0, 0, 0)\",\n                }\n                },],            \n            },\n        layout: {\n              padding: {\n                  left: 50,\n                  right: 50,\n                  top: 20,\n                  bottom: 20\n              }\n          }   \n    };\n\n    var lineRegressionChartData = {\n        //labels: [\"2020-05-08\", \"2020-05-09\", \"2020-05-10\"],\n        //labels: [0.8,0.9,1.0],\n        labels: regression_fx,\n        datasets: [{\n   \n          type: \"line\",\n          label: \"sales in store currency\",\n          fill: false,\n          lineTension: 0,\n          backgroundColor: \"rgba(0, 0, 0, 0)\",\n          borderWidth: 0,\n          borderColor: \"rgba(0, 0, 0, 0)\",\n          borderCapStyle: 'butt',\n          borderDash: [],\n          borderDashOffset: 0.0,\n          borderJoinStyle: 'miter',\n          pointBorderColor: \"#ffa41b\",\n          pointBackgroundColor: \"#ffa41b\",\n          pointBorderWidth: 1,\n          pointHoverRadius: 5,\n          pointHoverBackgroundColor: \"#ffa41b\",\n          pointHoverBorderColor: \"#ffa41b\",\n          pointHoverBorderWidth: 2,\n          pointRadius: 4,\n          pointHitRadius: 10,\n          // notice the gap in the data and the spanGaps: false\n          //data: [89.54, 96.8, 246.51],\n          //data: [209, 555, 143],\n          data: regression_sales,\n          spanGaps: false,\n          barPercentage: 0.3\n          },\n          {\n            type: \"line\",\n            label: \"fitted model\",\n            fill: false,\n            backgroundColor: \"#D3D3D3\",\n            borderColor: \"#D3D3D3\",\n            borderCapStyle: 'butt',\n            borderDash: [],\n            borderDashOffset: 0.0,\n            borderJoinStyle: 'miter',\n            pointBorderColor: \"#D3D3D3\",\n            pointBackgroundColor: \"#fff\",\n            pointBorderWidth: 1,\n            pointHoverRadius: 5,\n            pointHoverBackgroundColor: \"#D3D3D3\",\n            pointHoverBorderColor: \"#D3D3D3\",\n            pointHoverBorderWidth: 2,\n            pointRadius: 1,\n            pointHitRadius: 10,\n            //data: [100,200,300],\n            data: regression_predicted_sales,\n            spanGaps: false,\n            }\n        ]\n        };\n      \n      var lineRegressionChartOptions = {\n        maintainAspectRatio: true,\n        tooltips:{\n          enabled:true,\n        },\n        legend: {\n          display: false,\n        },\n        scales: {\n                  yAxes:\n                  [{\n                      id: 'A',\n                      type: 'linear',\n                      //position: 'left',\n                      gridLines: {\n                          color: \"rgba(0, 0, 0, 0)\",\n                      },\n                      //ticks: {min: min_bar,\n                      //    max: max_bar}\n      \n       \n                    }],\n                  xAxes: [{\n                    gridLines: {\n                      color: \"rgba(0, 0, 0, 0)\",\n                  }\n                  },],            \n              },\n          layout: {\n                padding: {\n                    left: 50,\n                    right: 50,\n                    top: 20,\n                    bottom: 20\n                }\n            }   \n      };\n    \n    \n    const barChartData = {\n      //labels: ['China - Monthly CPI', 'US - Monthly CPI', 'China - Quarterly GDP','US - Aaa Corporate Bonds', 'US - S&P 500'],\n      labels: product_array_rank,\n      datasets: [\n        {\n          backgroundColor: ['#63b7af', \"#ff6f5e\", '#ffa41b','#b2ebf2','#35495e'],\n          borderColor: 'rgba(0, 0, 0, 0)',\n          borderWidth: 2,\n          //data: [0.65, 0.50, 0.47, 0.39, 0.37]\n          data: slope_rank\n        }\n      ],\n    };\n    \n    const barChartOptions = {\n    \n      legend: {\n                display: false,\n              },\n    \n      scales: {\n                xAxes: [{\n\n\n\n                  scaleLabel: {\n                    display: true,\n                    labelString: \"Sales change in \"+store_currency+\" with 1 \"+props.tabs[props.select]['id']+\" price change\"\n                  },\n                  gridLines: {\n                    color: \"rgba(0, 0, 0, 0)\",\n                }\n                },],\n                yAxes: [{\n                  barPercentage: 0.3,\n                  gridLines: {\n                    color: \"rgba(0, 0, 0, 0)\",\n                }\n                },],\n              },\n        layout: {\n                padding: {\n                    left: 20,\n                    right: 80,\n                    top: 20,\n                    bottom: 20\n                }\n            }  \n    };\n    \n    const rangeChartData = {\n        labels: ['past 3 days', 'past 1 week', 'past 1 month', 'past 3 months'],\n        datasets: [\n        {\n        label: 'range',\n        backgroundColor: '#35495e',\n        stack: '3',\n        data: leve_num1,\n        },\n        {\n        backgroundColor: '#63b7af',\n        stack: '3',\n        data: leve_num2,\n        },\n        {\n          label: 'range2',\n          backgroundColor: '#35495e',\n          stack: '3',\n          data: leve_num3,\n          },\n        ],\n      };\n        \n      const rangeChartOptions = {\n        maintainAspectRatio: true,\n        tooltips:{\n          enabled:false,\n        },\n        legend: {\n                  display: false,\n                },\n        scales: {\n                  xAxes: [{\n                    stacked: true,\n                    gridLines: {\n                      color: \"rgba(0, 0, 0, 0)\",\n                    },\n                    ticks: {\n                      min: 0,\n                      max: 100,\n                      callback: function(value) {\n                          return value + \"%\"\n                      }\n                    }\n                  },],\n                  yAxes: [{\n                    stacked: true,\n                    barPercentage: 0.4,\n                    gridLines: {\n                      color: \"rgba(0, 0, 0, 0)\",\n                  }\n                  \n                  },],\n                },\n                layout: {\n                  padding: {\n                      left: 20,\n                      right: 80,\n                      top: 20,\n                      bottom: 20\n                  }\n              }  \n        };\n\n        //console.log(\"height is \", [height2, h1, h2, h3])\n    return (\n            <Layout sectioned={false}>\n <Layout.Section oneHalf>\n \n <Card title=\"Analytics\" sectioned>\n                            <p><b>Price range:</b> {min_price_range} {props.tabs[props.select]['id']} - {max_price_range} {props.tabs[props.select]['id']}</p><br/>\n                            <p><b>Sales range:</b> {min_sales_range} {store_currency} - {max_sales_range} {store_currency} per day</p><br/>\n                            <p><FaRegArrowAltCircleDown/> 1 {props.tabs[props.select]['id']} in price</p><br/>\n                            <p><FaRegArrowAltCircleUp/> {regression_slope} {store_currency} sales/day</p><br/>\n                            <p><b>Current price:</b> {today_product_price} {props.tabs[props.select]['id']}</p><br/>\n                            <p><b>Projected sales:</b> {indicated_sale} {store_currency} per day</p><br/>\n                        </Card>\n\n                        \n </Layout.Section>\n <Layout.Section oneHalf>\n <Bar \n                            height=\"280vh\"\n                            data={lineRegressionChartData}\n                            options={lineRegressionChartOptions}\n                        />\n   </Layout.Section>\n\n\n              \n            </Layout>\n      \n         \n\n    );\n  }\n\n"]},"metadata":{},"sourceType":"module"}