{"ast":null,"code":"var linear_regression = require('./linear_regression');\n\nvar price_elasticity = require('./price_elasticity');\n\nvar price_sensitive_market = function price_sensitive_market(tabs, maps) {\n  //let myMap = new Map();\n  //try{\n  var elasticity_list = [];\n  console.log(\"tabs.length is \", tabs);\n  /*\n      for (var i=1;i<3;i++){\n          const selected_currency = tabs[i]['id']\n          console.log(\"selected_currency is \", selected_currency)\n  \n          const selected_data_all_products = maps.get(selected_currency)\n          const selected_data = selected_data_all_products.get('all')\n          var product_price_list = selected_data[2].map(function(element) {\n              return Math.round(element*product_price*100)/100;\n          });\n  \n          const slope = linear_regression(selected_data[1],product_price_list)[3]\n  \n          console.log(\"slope is \", slope)\n  \n          const elasticity = price_elasticity(selected_data[1], product_price_list, Math.abs(slope))\n  \n          console.log(\"elasticity is \", elasticity)\n          \n          if (myMap.has(elasticity)){\n              var value = myMap.get(elasticity)\n              value.push(selected_currency)\n              myMap.set(elasticity, value)\n          }else{\n              myMap.set(elasticity, [selected_currency])\n          }\n          elasticity_list.push(elasticity)\n      }\n  \n      elasticity_list.sort(function(a, b){return b-a});\n  \n      console.log(\"elasticity_list is \", elasticity_list)\n  \n      var currency_rank = []\n  \n      for (var j=1;j<tabs.length;j++){\n          var currency = elasticity_list[j]\n          if (!currency_rank.includes(currency[0])){\n              currency_rank.push(currency)\n          }\n      }\n  \n      console.log(\"currency_rank is \", currency_rank)\n  \n      //localStorage.setItem('currency_elasticity_rank', currency_rank);\n      return currency_rank*/\n  //} catch (error){\n  // console.log(\"error in price sensitive market\")\n  //}\n};\n\nmodule.exports = price_sensitive_market;","map":{"version":3,"sources":["/Users/tatianatian/Desktop/Startup/shopify_front_back_end/client/functions/price_sensitive_market.js"],"names":["linear_regression","require","price_elasticity","price_sensitive_market","tabs","maps","elasticity_list","console","log","module","exports"],"mappings":"AAAA,IAAMA,iBAAiB,GAAGC,OAAO,CAAC,qBAAD,CAAjC;;AACA,IAAMC,gBAAgB,GAAGD,OAAO,CAAC,oBAAD,CAAhC;;AAEA,IAAME,sBAAsB,GAAG,SAAzBA,sBAAyB,CAACC,IAAD,EAAOC,IAAP,EAAgB;AAC3C;AACA;AACA,MAAIC,eAAe,GAAG,EAAtB;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BJ,IAA/B;AAEJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CC;AACE;AACC;AACH,CAvDD;;AAyDAK,MAAM,CAACC,OAAP,GAAiBP,sBAAjB","sourcesContent":["const linear_regression = require('./linear_regression')\nconst price_elasticity = require('./price_elasticity')\n\nconst price_sensitive_market = (tabs, maps) => {\n    //let myMap = new Map();\n    //try{\n    var elasticity_list = []\n    console.log(\"tabs.length is \", tabs)\n\n/*\n    for (var i=1;i<3;i++){\n        const selected_currency = tabs[i]['id']\n        console.log(\"selected_currency is \", selected_currency)\n\n        const selected_data_all_products = maps.get(selected_currency)\n        const selected_data = selected_data_all_products.get('all')\n        var product_price_list = selected_data[2].map(function(element) {\n            return Math.round(element*product_price*100)/100;\n        });\n\n        const slope = linear_regression(selected_data[1],product_price_list)[3]\n\n        console.log(\"slope is \", slope)\n\n        const elasticity = price_elasticity(selected_data[1], product_price_list, Math.abs(slope))\n\n        console.log(\"elasticity is \", elasticity)\n        \n        if (myMap.has(elasticity)){\n            var value = myMap.get(elasticity)\n            value.push(selected_currency)\n            myMap.set(elasticity, value)\n        }else{\n            myMap.set(elasticity, [selected_currency])\n        }\n        elasticity_list.push(elasticity)\n    }\n\n    elasticity_list.sort(function(a, b){return b-a});\n\n    console.log(\"elasticity_list is \", elasticity_list)\n\n    var currency_rank = []\n\n    for (var j=1;j<tabs.length;j++){\n        var currency = elasticity_list[j]\n        if (!currency_rank.includes(currency[0])){\n            currency_rank.push(currency)\n        }\n    }\n\n    console.log(\"currency_rank is \", currency_rank)\n\n    //localStorage.setItem('currency_elasticity_rank', currency_rank);\n    return currency_rank*/\n //} catch (error){\n   // console.log(\"error in price sensitive market\")\n    //}\n}\n\nmodule.exports = price_sensitive_market; "]},"metadata":{},"sourceType":"script"}