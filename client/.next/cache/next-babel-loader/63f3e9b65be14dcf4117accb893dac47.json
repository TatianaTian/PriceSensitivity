{"ast":null,"code":"var _slicedToArray = require(\"@babel/runtime/helpers/slicedToArray\");\n\nvar jsregression = require('js-regression');\n\nvar linear_regression = function linear_regression(sales, exchange_rate) {\n  var _reformat_data = reformat_data(sales, exchange_rate),\n      _reformat_data2 = _slicedToArray(_reformat_data, 2),\n      data = _reformat_data2[0],\n      myMap = _reformat_data2[1];\n\n  console.log(\"data is \", data);\n  var regression = new jsregression.LinearRegression();\n  var model = regression.fit(data);\n  var myMap2 = new Map();\n  myMap2 = myMap; // sort exchange rate\n\n  exchange_rate.sort(function (a, b) {\n    return a - b;\n  });\n  var regression_fx = [];\n  var regression_sales = [];\n  var regression_predicted_sales = [];\n\n  for (j = 0; j < exchange_rate.length; j++) {\n    regression_fx.push(exchange_rate[i]);\n    regression_sales.push(myMap2.get(exchange_rate[i]));\n    regression_predicted_sales.push(regression.transform([exchange_rate[i]]));\n  }\n\n  console.log(\"regression_fx is \", regression_fx);\n  console.log(\"regression_sales is \", regression_sales);\n  console.log(\"regression_predicted_sales is \", regression_predicted_sales);\n  return [regression_fx, regression_sales, regression_predicted_sales];\n};\n\nfunction reformat_data(sales, exchange_rate) {\n  var data = [];\n  var myMap = new Map();\n\n  for (i = 0; i < exchange_rate.length; i++) {\n    data.push([exchange_rate[i], sales[i]]);\n    myMap.set(exchange_rate[i], sales[i]);\n  }\n\n  return [data, myMap];\n}\n\nmodule.exports = linear_regression; //linear_regression([20,50,60],[4,9,7])\n\nvar data = [];\n\nfor (var x = 1.0; x < 100.0; x += 1.0) {\n  var y = 2.0 + 5.0 * x + 2.0 * x * x + Math.random() * 1.0;\n  data.push([x, y]); // Note that the last column should be y the output\n}\n\ndata = [[1, 2], [2, 3], [3, 4]]; // === Create the linear regression === //\n\nvar regression = new jsregression.LinearRegression({\n  alpha: 0.001,\n  // \n  iterations: 300,\n  lambda: 0.0\n}); // can also use default configuration: var regression = new jsregression.LinearRegression(); \n// === Train the linear regression === //\n\nvar model = regression.fit(data); // === Print the trained model === //\n\nconsole.log(model);\nconsole.log(regression.transform([3])); // === Testing the trained linear regression === //\n\nvar testingData = [];\n\nfor (var x = 1.0; x < 100.0; x += 1.0) {\n  var actual_y = 2.0 + 5.0 * x + 2.0 * x * x + Math.random() * 1.0;\n  var predicted_y = regression.transform([x, x * x]);\n  console.log(\"actual: \" + actual_y + \" predicted: \" + predicted_y);\n}","map":{"version":3,"sources":["/Users/tatianatian/Desktop/Startup/shopify_front_back_end/client/functions/linear_regression.js"],"names":["jsregression","require","linear_regression","sales","exchange_rate","reformat_data","data","myMap","console","log","regression","LinearRegression","model","fit","myMap2","Map","sort","a","b","regression_fx","regression_sales","regression_predicted_sales","j","length","push","i","get","transform","set","module","exports","x","y","Math","random","alpha","iterations","lambda","testingData","actual_y","predicted_y"],"mappings":"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","sourcesContent":["var jsregression = require('js-regression');\n\nconst linear_regression = (sales, exchange_rate)=>{\n    var [data, myMap] = reformat_data(sales, exchange_rate)\n    console.log(\"data is \", data)\n    var regression = new jsregression.LinearRegression();\n    var model = regression.fit(data);\n    \n    let myMap2 = new Map();\n    myMap2 = myMap\n\n    // sort exchange rate\n    exchange_rate.sort(function(a, b){return a-b});\n    var regression_fx = []\n    var regression_sales = []\n    var regression_predicted_sales = []\n    \n    for (j=0;j<exchange_rate.length;j++){\n        regression_fx.push(exchange_rate[i])\n        regression_sales.push(myMap2.get(exchange_rate[i]))\n        regression_predicted_sales.push(regression.transform([exchange_rate[i]]))\n    }\n\n    console.log(\"regression_fx is \", regression_fx);\n    console.log(\"regression_sales is \", regression_sales);\n    console.log(\"regression_predicted_sales is \", regression_predicted_sales);\n\n    return [regression_fx, regression_sales, regression_predicted_sales]\n}\n\nfunction reformat_data(sales, exchange_rate){\n    const data = []\n    let myMap = new Map()\n    for (i=0;i<exchange_rate.length;i++){\n        data.push([exchange_rate[i],sales[i]])\n        myMap.set(exchange_rate[i],sales[i])\n    }\n    return [data, myMap]\n}\n \nmodule.exports = linear_regression; \n\n//linear_regression([20,50,60],[4,9,7])\n\nvar data = [];\nfor(var x = 1.0; x < 100.0; x += 1.0) {\n  var y = 2.0 + 5.0 * x + 2.0 * x * x + Math.random() * 1.0;\n  data.push([x, y]); // Note that the last column should be y the output\n}\n\ndata = [[1,2],[2,3],[3,4]]\n \n// === Create the linear regression === //\nvar regression = new jsregression.LinearRegression({\n  alpha: 0.001, // \n  iterations: 300,\n  lambda: 0.0\n});\n// can also use default configuration: var regression = new jsregression.LinearRegression(); \n \n// === Train the linear regression === //\nvar model = regression.fit(data);\n \n// === Print the trained model === //\nconsole.log(model);\nconsole.log(regression.transform([3]));\n \n \n// === Testing the trained linear regression === //\nvar testingData = [];\nfor(var x = 1.0; x < 100.0; x += 1.0) {\n  var actual_y = 2.0 + 5.0 * x + 2.0 * x * x + Math.random() * 1.0;\n  var predicted_y = regression.transform([x, x * x]);\n  console.log(\"actual: \" + actual_y + \" predicted: \" + predicted_y); \n}"]},"metadata":{},"sourceType":"script"}