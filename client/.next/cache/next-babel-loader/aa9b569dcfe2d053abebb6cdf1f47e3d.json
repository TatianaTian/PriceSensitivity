{"ast":null,"code":"\"use strict\";\n\nvar _storeJs = _interopRequireDefault(require(\"store-js\"));\n\nvar _polaris = require(\"@shopify/polaris\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst getPearsonCorrelation = require('./calc_correlation');\n\nconst linear_regression = require('./linear_regression');\n\nconst fetch_from_map = (select, tabs, maps, product_id_title_map, dropdown_select) => {\n  try {\n    if (select !== 0) {\n      // fetch data for graphs\n      const selected_currency = tabs[select]['id'];\n      console.log(\"selected currency is \", selected_currency);\n      const selected_data_all_products = maps.get(selected_currency);\n      const selected_data = selected_data_all_products.get(dropdown_select);\n      const [regression_fx, regression_sales, regression_predicted_sales, slope] = linear_regression(selected_data[1], selected_data[2]);\n      console.log(\"regression_fx is \", regression_fx);\n      console.log(\"regression_sales is \", regression_sales);\n      console.log(\"regression_predicted_sales is \", regression_predicted_sales);\n      console.log(\"slope is \", slope);\n      console.log(\"selected data is \", selected_data);\n      localStorage.setItem('date', selected_data[0]);\n      localStorage.setItem('price', selected_data[1]);\n      localStorage.setItem('exchange_rate', selected_data[2]);\n      localStorage.setItem('current_level', selected_data[3]);\n      localStorage.setItem('correlation', getPearsonCorrelation(selected_data[1], selected_data[2]));\n      localStorage.setItem('regression_fx', regression_fx);\n      localStorage.setItem('regression_sales', regression_sales);\n      localStorage.setItem('regression_predicted_sales', regression_predicted_sales);\n      localStorage.setItem('slope', slope);\n      console.log(\"done storing\");\n      /*\n      console.log(\"localStorage.getItem('date') is\",localStorage.getItem('date'))\n      console.log(\"localStorage.getItem('price') is\",localStorage.getItem('price'))\n      console.log(\"localStorage.getItem('exchange_rate') is\",localStorage.getItem('exchange_rate'))*/\n      // filter options\n\n      console.log(\"selected_data_all_products is\", selected_data_all_products);\n      console.log('product_id_title_map is ', product_id_title_map);\n      var num_dates = 0;\n      var options = [];\n\n      for (let [key, value] of selected_data_all_products) {\n        num_dates = value[0].length;\n\n        if (num_dates > 1) {\n          var price_set = new Set(value[1]);\n          var fx_set = new Set(value[2]);\n\n          if (price_set.size > 1 && fx_set.size > 1) {\n            console.log('use key to get name ', product_id_title_map.get(key));\n            options.push({\n              label: product_id_title_map.get(key),\n              value: key\n            });\n          }\n        }\n\n        console.log(key + ' = ' + value);\n      }\n    }\n  } catch (err) {\n    console.log(\"no id\");\n  }\n\n  return options;\n};\n\nmodule.exports = fetch_from_map;","map":{"version":3,"sources":["/Users/tatianatian/Desktop/Startup/shopify_front_back_end/client/functions/fetch_from_map.js"],"names":["getPearsonCorrelation","require","linear_regression","fetch_from_map","select","tabs","maps","product_id_title_map","dropdown_select","selected_currency","console","log","selected_data_all_products","get","selected_data","regression_fx","regression_sales","regression_predicted_sales","slope","localStorage","setItem","num_dates","options","key","value","length","price_set","Set","fx_set","size","push","label","err","module","exports"],"mappings":"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","sourcesContent":["import store from 'store-js';\nimport { KeypressListener } from '@shopify/polaris';\n\nconst getPearsonCorrelation = require('./calc_correlation')\nconst linear_regression = require('./linear_regression')\n\nconst fetch_from_map = (select, tabs, maps, product_id_title_map, dropdown_select) => {\n\n\n    try{\n        \n        if (select !== 0){\n            // fetch data for graphs\n            const selected_currency = tabs[select]['id']\n            console.log(\"selected currency is \", selected_currency)\n\n\n            const selected_data_all_products = maps.get(selected_currency)\n            const selected_data = selected_data_all_products.get(dropdown_select)\n\n            const [regression_fx, regression_sales, regression_predicted_sales, slope] = linear_regression(selected_data[1],selected_data[2])\n                \n            console.log(\"regression_fx is \", regression_fx);\n            console.log(\"regression_sales is \", regression_sales);\n            console.log(\"regression_predicted_sales is \", regression_predicted_sales);\n            console.log(\"slope is \", slope);\n    \n            console.log(\"selected data is \", selected_data)\n\n            localStorage.setItem('date', selected_data[0]);\n            localStorage.setItem('price', selected_data[1]);\n            localStorage.setItem('exchange_rate', selected_data[2]);\n            localStorage.setItem('current_level', selected_data[3]);\n            localStorage.setItem('correlation', getPearsonCorrelation(selected_data[1],selected_data[2]));\n            localStorage.setItem('regression_fx', regression_fx);\n            localStorage.setItem('regression_sales', regression_sales);\n            localStorage.setItem('regression_predicted_sales', regression_predicted_sales);\n            localStorage.setItem('slope', slope);\n\n            console.log(\"done storing\")\n            /*\n            console.log(\"localStorage.getItem('date') is\",localStorage.getItem('date'))\n            console.log(\"localStorage.getItem('price') is\",localStorage.getItem('price'))\n            console.log(\"localStorage.getItem('exchange_rate') is\",localStorage.getItem('exchange_rate'))*/\n\n\n            // filter options\n            console.log(\"selected_data_all_products is\",selected_data_all_products)\n            console.log('product_id_title_map is ', product_id_title_map)\n            var num_dates = 0\n            var options = []\n            for (let [key, value] of selected_data_all_products) {\n                num_dates = value[0].length\n                if (num_dates>1){\n                    var price_set = new Set(value[1]);\n                    var fx_set = new Set(value[2]);\n                    if (price_set.size>1 && fx_set.size>1){\n                        console.log('use key to get name ', product_id_title_map.get(key))\n                        options.push(\n                            {\n                                label:product_id_title_map.get(key), value: key\n                            }\n                        )\n                    }\n                }\n\n                console.log(key + ' = ' + value)\n              }\n\n\n        }\n\n        \n\n\n\n    } catch(err){\n        console.log(\"no id\")\n    }\n    \n    return options\n}\n\nmodule.exports = fetch_from_map; \n\n"]},"metadata":{},"sourceType":"script"}