{"ast":null,"code":"var _slicedToArray = require(\"@babel/runtime/helpers/slicedToArray\");\n\n// import \nvar position = require('./positionGenerator'); // user asks for quote: collect buyer/seller currencies and units from Shopify\n\n\nvar buyer_currency = 'GBP';\nvar seller_currency = 'USD'; // connect to ONADA\n\nvar common = require('./lib/common');\n\nvar config = require('./lib/config');\n\nvar argv = require('yargs').alias('config', 'c').nargs('config', 1).describe('config', \"v20 Configuration File to use\")[\"default\"]('config', config.defaultConfigFile()).argv;\n\nvar conf = new config.Config(argv.config);\nvar ctx = conf.createContext();\nvar price = ''; // generate the trading direction\n\nvar _position$positionInd = position.positionIndicator(buyer_currency, seller_currency),\n    _position$positionInd2 = _slicedToArray(_position$positionInd, 2),\n    trade_direction = _position$positionInd2[0],\n    currency_pair = _position$positionInd2[1];\n\nif (trade_direction === 'buy') {\n  account = conf.buyAccount;\n} else if (trade_direction === 'sell') {\n  account = conf.sellAccount;\n} // request prices\n\n\nctx.pricing.get(account, {\n  instruments: currency_pair\n}, function (response) {\n  var obj = JSON.parse(response['rawBody']);\n\n  if (trade_direction === \"buy\") {\n    price = obj.prices[0].asks;\n    indicate_trade_price = price[0].price;\n    indicate_locked_rate = indicate_trade_price * 1.005;\n  } else if (trade_direction === \"sell\") {\n    price = obj.prices[0].bids;\n    indicate_trade_price = price[0].price;\n    indicate_locked_rate = indicate_trade_price * 0.99;\n  } //console.log(indicate_trade_price) \n\n\n  console.log(indicate_locked_rate); // indicate_trade_price is the price from ONADA, indicated_locked_rate is the marked up rate, send indicate_trade_price value back to Shopify\n});","map":{"version":3,"sources":["/Users/tatianatian/Desktop/Startup/shopify_app/trade/trades/src/request_bid_ask.js"],"names":["position","require","buyer_currency","seller_currency","common","config","argv","alias","nargs","describe","defaultConfigFile","conf","Config","ctx","createContext","price","positionIndicator","trade_direction","currency_pair","account","buyAccount","sellAccount","pricing","get","instruments","response","obj","JSON","parse","prices","asks","indicate_trade_price","indicate_locked_rate","bids","console","log"],"mappings":";;AAAA;AACA,IAAIA,QAAQ,GAAGC,OAAO,CAAC,qBAAD,CAAtB,C,CAEA;;;AACA,IAAIC,cAAc,GAAG,KAArB;AACA,IAAIC,eAAe,GAAG,KAAtB,C,CAGA;;AACA,IAAIC,MAAM,GAAGH,OAAO,CAAC,cAAD,CAApB;;AACA,IAAII,MAAM,GAAGJ,OAAO,CAAC,cAAD,CAApB;;AAEA,IAAIK,IAAI,GAAGL,OAAO,CAAC,OAAD,CAAP,CACVM,KADU,CACJ,QADI,EACM,GADN,EAEVC,KAFU,CAEJ,QAFI,EAEM,CAFN,EAGVC,QAHU,CAGD,QAHC,EAGS,+BAHT,aAIF,QAJE,EAIQJ,MAAM,CAACK,iBAAP,EAJR,EAKVJ,IALD;;AAOA,IAAIK,IAAI,GAAG,IAAIN,MAAM,CAACO,MAAX,CAAkBN,IAAI,CAACD,MAAvB,CAAX;AACA,IAAIQ,GAAG,GAAGF,IAAI,CAACG,aAAL,EAAV;AACA,IAAIC,KAAK,GAAG,EAAZ,C,CAEA;;4BACuCf,QAAQ,CAACgB,iBAAT,CAA2Bd,cAA3B,EAA0CC,eAA1C,C;;IAAlCc,e;IAAiBC,a;;AACtB,IAAID,eAAe,KAAK,KAAxB,EAA8B;AAC1BE,EAAAA,OAAO,GAAGR,IAAI,CAACS,UAAf;AACH,CAFD,MAGK,IAAIH,eAAe,KAAK,MAAxB,EAA+B;AAChCE,EAAAA,OAAO,GAAGR,IAAI,CAACU,WAAf;AACH,C,CAED;;;AACAR,GAAG,CAACS,OAAJ,CAAYC,GAAZ,CACIJ,OADJ,EAEI;AACIK,EAAAA,WAAW,EAAEN;AADjB,CAFJ,EAMI,UAACO,QAAD,EAAc;AACV,MAAIC,GAAG,GAAGC,IAAI,CAACC,KAAL,CAAWH,QAAQ,CAAC,SAAD,CAAnB,CAAV;;AACA,MAAIR,eAAe,KAAK,KAAxB,EAA8B;AAC1BF,IAAAA,KAAK,GAAGW,GAAG,CAACG,MAAJ,CAAW,CAAX,EAAcC,IAAtB;AACAC,IAAAA,oBAAoB,GAAGhB,KAAK,CAAC,CAAD,CAAL,CAASA,KAAhC;AACAiB,IAAAA,oBAAoB,GAAID,oBAAoB,GAAG,KAA/C;AACH,GAJD,MAKK,IAAId,eAAe,KAAK,MAAxB,EAA+B;AAChCF,IAAAA,KAAK,GAAGW,GAAG,CAACG,MAAJ,CAAW,CAAX,EAAcI,IAAtB;AACAF,IAAAA,oBAAoB,GAAGhB,KAAK,CAAC,CAAD,CAAL,CAASA,KAAhC;AACAiB,IAAAA,oBAAoB,GAAID,oBAAoB,GAAG,IAA/C;AACH,GAXS,CAYV;;;AACAG,EAAAA,OAAO,CAACC,GAAR,CAAYH,oBAAZ,EAbU,CAcV;AACH,CArBL","sourcesContent":["// import \nlet position = require('./positionGenerator');\n\n// user asks for quote: collect buyer/seller currencies and units from Shopify\nvar buyer_currency = 'GBP';\nvar seller_currency = 'USD';\n\n\n// connect to ONADA\nlet common = require('./lib/common');\nlet config = require('./lib/config');\n\nlet argv = require('yargs')\n.alias('config', 'c')\n.nargs('config', 1)\n.describe('config', \"v20 Configuration File to use\")\n.default('config', config.defaultConfigFile())\n.argv;\n\nlet conf = new config.Config(argv.config);\nlet ctx = conf.createContext();\nvar price = '';\n\n// generate the trading direction\nvar [trade_direction, currency_pair] = position.positionIndicator(buyer_currency,seller_currency);\nif (trade_direction === 'buy'){\n    account = conf.buyAccount\n}\nelse if (trade_direction === 'sell'){\n    account = conf.sellAccount\n}\n\n// request prices\nctx.pricing.get(\n    account,\n    {\n        instruments: currency_pair,\n    },\n\n    (response) => {\n        var obj = JSON.parse(response['rawBody']);\n        if (trade_direction === \"buy\"){\n            price = obj.prices[0].asks\n            indicate_trade_price = price[0].price\n            indicate_locked_rate =  indicate_trade_price * 1.005\n        }\n        else if (trade_direction === \"sell\"){\n            price = obj.prices[0].bids\n            indicate_trade_price = price[0].price\n            indicate_locked_rate =  indicate_trade_price * 0.99\n        }\n        //console.log(indicate_trade_price) \n        console.log(indicate_locked_rate) \n        // indicate_trade_price is the price from ONADA, indicated_locked_rate is the marked up rate, send indicate_trade_price value back to Shopify\n    }\n)    \n\n\n  "]},"metadata":{},"sourceType":"script"}