{"ast":null,"code":"\"use strict\";\n\nvar _storeJs = _interopRequireDefault(require(\"store-js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst getPearsonCorrelation = require('./calc_correlation');\n\nconst change_format2 = allList => {\n  let myMap = new Map();\n  let countryListMap = new Map(); //console.log(\"all list is \", alllist)\n\n  const store_currency = allList[3]; //localStorage.setItem('store_currency', store_currency);\n\n  /*\n  if(window.localStorage) {\n      // localStorage can be used\n      localStorage.setItem('store_currency', store_currency);\n    } else {\n      // can't be used\n      //localStorage.setItem('store_currency', store_currency);\n      console.log(\"error in localstorage\")\n    }*/\n\n  const list = allList[1]; // try{\n\n  console.log(\"list in format is \", list); // i is currency iterator\n\n  for (var i = 0; i < list.length; i++) {\n    //console.log(\"i is \", i)\n    const currency = list[i][0];\n    const detail = list[i][3];\n    const current_level = list[i][2];\n    const country_list = list[i][1];\n    countryListMap.set(currency, country_list); //console.log(\"currency is \", currency)\n    // j is products/all iterator\n\n    let map2 = new Map();\n\n    for (var j = 0; j < detail.length; j++) {\n      //console.log(\"j is \", j)\n      var date_list = [];\n      var revenue_list = [];\n      var fx_list = [];\n      const product_id = list[i][3][j][0];\n\n      for (var k = 0; k < list[i][3][j][1].length; k++) {\n        date_list.push(list[i][3][j][1][k][0]); //date_list.push('*')\n\n        revenue_list.push(parseFloat(list[i][3][j][1][k][1][0])); //revenue_list.push('*')\n\n        fx_list.push(parseFloat(list[i][3][j][1][k][1][1])); //fx_list.push('*')\n      }\n\n      map2.set(product_id, [date_list, revenue_list, fx_list, current_level, country_list]);\n    }\n\n    myMap.set(currency, map2);\n  } //console.log(\"myMap is \", myMap)\n\n\n  const product_id_title = allList[2];\n  let product_id_title_map = new Map();\n  let product_id_price_map = new Map(); //console.log('product_id_title is ', product_id_title)\n\n  try {\n    for (var k = 0; k < product_id_title.length; k++) {\n      product_id_title_map.set(product_id_title[k][0], product_id_title[k][1]);\n      product_id_price_map.set(product_id_title[k][0], product_id_title[k][2]);\n    }\n  } catch (error) {\n    console.log(\"error id title\");\n  } // build today fx map\n\n\n  let fx_map = new Map();\n\n  try {\n    fx_list = allList[4];\n    console.log(\"fx_list length is \", fx_list.length);\n\n    for (var f = 0; f < fx_list.length; f++) {\n      fx_map.set(fx_list[f][0], fx_list[f][1]);\n    }\n  } catch (error) {\n    console.log(\"fx_list length error\");\n  }\n\n  console.log(\"fx_map is \", fx_map);\n  return [myMap, product_id_title_map, product_id_price_map, store_currency, fx_map, countryListMap];\n};\n\nmodule.exports = change_format2;","map":{"version":3,"sources":["/Users/tatianatian/Desktop/Startup/shopify_front_back_end/client/functions/change_format2.js"],"names":["getPearsonCorrelation","require","change_format2","allList","myMap","Map","countryListMap","store_currency","list","console","log","i","length","currency","detail","current_level","country_list","set","map2","j","date_list","revenue_list","fx_list","product_id","k","push","parseFloat","product_id_title","product_id_title_map","product_id_price_map","error","fx_map","f","module","exports"],"mappings":"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","sourcesContent":["import store from 'store-js';\n\nconst getPearsonCorrelation = require('./calc_correlation')\n\nconst change_format2 = (allList) => {\n    let myMap = new Map();\n    let countryListMap = new Map();\n    //console.log(\"all list is \", alllist)\n\n    const store_currency = allList[3]\n    //localStorage.setItem('store_currency', store_currency);\n    /*\n    if(window.localStorage) {\n        // localStorage can be used\n        localStorage.setItem('store_currency', store_currency);\n      } else {\n        // can't be used\n        //localStorage.setItem('store_currency', store_currency);\n        console.log(\"error in localstorage\")\n      }*/\n    \n\n    const list = allList[1]\n   // try{\n    console.log(\"list in format is \", list)\n    // i is currency iterator\n    for (var i=0; i<list.length; i++){\n        //console.log(\"i is \", i)\n        const currency = list[i][0]\n        const detail = list[i][3]\n        const current_level = list[i][2]\n        const country_list = list[i][1]\n\n        countryListMap.set(currency, country_list)\n        //console.log(\"currency is \", currency)\n\n        // j is products/all iterator\n        let map2 = new Map();\n        for (var j=0; j<detail.length; j++){\n            //console.log(\"j is \", j)\n            var date_list = []\n            var revenue_list = []\n            var fx_list = []\n\n\n            const product_id = list[i][3][j][0]\n            for (var k=0; k<list[i][3][j][1].length; k++){\n                    \n                date_list.push(list[i][3][j][1][k][0])\n                //date_list.push('*')\n                revenue_list.push(parseFloat(list[i][3][j][1][k][1][0]))\n                //revenue_list.push('*')\n                fx_list.push(parseFloat(list[i][3][j][1][k][1][1]))\n                //fx_list.push('*')\n            }\n            map2.set(product_id, [date_list, revenue_list, fx_list, current_level, country_list])\n        }\n        myMap.set(currency, map2)\n\n    }\n    //console.log(\"myMap is \", myMap)\n\n    const product_id_title = allList[2]\n    let product_id_title_map = new Map();\n    let product_id_price_map = new Map();\n\n    //console.log('product_id_title is ', product_id_title)\n    \n    try{\n        for (var k=0; k<product_id_title.length; k++){\n            product_id_title_map.set(product_id_title[k][0],product_id_title[k][1])\n            product_id_price_map.set(product_id_title[k][0],product_id_title[k][2])\n        }\n    } catch(error){\n        console.log(\"error id title\")\n    }\n\n    // build today fx map\n    let fx_map = new Map();\n    try{\n        fx_list = allList[4]\n        console.log(\"fx_list length is \", fx_list.length)\n        for (var f=0;f<fx_list.length;f++){\n            fx_map.set(fx_list[f][0], fx_list[f][1])\n        }\n\n    } catch(error){\n        console.log(\"fx_list length error\")\n    }\n    \n\n    console.log(\"fx_map is \", fx_map)\n    \n\n    return [myMap, product_id_title_map, product_id_price_map, store_currency, fx_map, countryListMap]\n}\n\nmodule.exports = change_format2; "]},"metadata":{},"sourceType":"script"}